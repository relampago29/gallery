(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{388:(e,t,a)=>{"use strict";a.d(t,{N_:()=>r,a8:()=>i});var s=a(981);let l=(0,a(9984).A)({locales:["pt","en"],defaultLocale:"pt",localePrefix:"always"}),{Link:r,usePathname:i,useRouter:n,redirect:c,getPathname:o}=(0,s.A)(l)},6215:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var s=a(5155),l=a(2115),r=a(6874),i=a.n(r),n=a(2797),c=a(5695),o=a(2337),d=a(5562),u=a(3817);function h(e){let{href:t,active:a,icon:l,children:r}=e;return(0,s.jsx)("li",{children:(0,s.jsxs)(i(),{href:t,className:"flex items-center gap-2 rounded-lg px-3 py-2 transition-colors ".concat(a?"bg-indigo-600 text-white":"text-gray-700 hover:bg-gray-100"),children:[l,(0,s.jsx)("span",{className:"truncate",children:r})]})})}function x(){let e=(0,n.Ym)(),t="/".concat(e,"/admin"),a=(0,c.usePathname)(),l=[{label:"Upload",href:"".concat(t,"/public/upload"),icon:(0,s.jsx)(o.A,{size:16})},{label:"Lista",href:"".concat(t,"/public/list"),icon:(0,s.jsx)(d.A,{size:16})},{label:"Categorias",href:"".concat(t,"/categories"),icon:(0,s.jsx)(u.A,{size:16})}];return(0,s.jsxs)("aside",{className:"h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"px-4 py-3 border-b",children:[(0,s.jsx)("div",{className:"font-semibold tracking-tight",children:"Admin"}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"Portf\xf3lio p\xfablico"})]}),(0,s.jsx)("nav",{className:"p-3",children:(0,s.jsx)("ul",{className:"space-y-1",children:l.map(e=>(0,s.jsx)(h,{href:e.href,icon:e.icon,active:null==a?void 0:a.startsWith(e.href),children:e.label},e.href))})}),(0,s.jsxs)("div",{className:"mt-auto p-3 text-xs text-gray-400",children:["\xa9 ",new Date().getFullYear()]})]})}var m=a(6203),f=a(8214),b=a(6891),j=a(9509);function p(e){let{children:t}=e,a=(0,c.useRouter)(),[r,i]=(0,l.useState)(!0),[n,o]=(0,l.useState)(null);return((0,l.useEffect)(()=>{let e=(0,m.hg)(f.j,e=>{o(e),i(!1)});return()=>e()},[]),(0,l.useEffect)(()=>{if(!r&&!n&&"redirect"===j.env.NEXT_PUBLIC_ADMIN_AUTH_MODE)try{let e=document.documentElement.getAttribute("lang")||"";a.replace("/".concat(e,"/login"))}catch(e){}},[r,n,a]),r)?(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-600",children:"A verificar sess\xe3o..."}):n?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)("div",{className:"min-h-[70vh] w-full flex items-center justify-center p-6",children:(0,s.jsx)("div",{className:"w-full max-w-md",children:(0,s.jsx)(b.default,{})})})}var v=a(6671);async function g(){f.j.currentUser||await new Promise((e,t)=>{let a=(0,m.hg)(f.j,async s=>{if(a(),s)return void e();try{await (0,m.zK)(f.j),e()}catch(e){t(e)}})})}var N=a(388);function y(e){let{children:t}=e;(0,l.useEffect)(()=>{g().catch(console.error)},[]);let a=(0,n.Ym)();return(0,s.jsxs)("div",{className:"relative flex min-h-screen overflow-hidden bg-[#030303] text-gray-100",children:[(0,s.jsxs)("div",{className:"pointer-events-none absolute inset-0",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.08),_transparent_60%)]"}),(0,s.jsx)("div",{className:"absolute -left-20 top-24 h-72 w-72 rounded-full bg-[#7c3aed1f] blur-3xl"}),(0,s.jsx)("div",{className:"absolute right-0 bottom-0 h-96 w-96 rounded-full bg-[#f472b61f] blur-3xl"})]}),(0,s.jsx)("aside",{className:"relative z-10 w-64 flex-shrink-0 border-r border-white/10 bg-white/5 backdrop-blur-lg",children:(0,s.jsx)(x,{})}),(0,s.jsxs)("div",{className:"relative z-10 flex flex-1 flex-col",children:[(0,s.jsx)("header",{className:"sticky top-0 z-20 border-b border-white/10 bg-[#030303]/80 backdrop-blur-xl",children:(0,s.jsxs)("div",{className:"mx-auto flex max-w-7xl items-center justify-between px-6 py-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60",children:"Admin"}),(0,s.jsx)("div",{className:"text-lg font-semibold text-white",children:"Dashboard"})]}),(0,s.jsx)(N.N_,{href:"/",locale:a,className:"inline-flex items-center justify-center rounded-full border border-white/30 px-4 py-1.5 text-sm text-white transition hover:bg-white/10 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white/60",children:"â† Voltar ao site"})]})}),(0,s.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,s.jsx)("div",{className:"mx-auto max-w-7xl px-6 py-10",children:(0,s.jsx)(p,{children:t})})})]}),(0,s.jsx)(v.l$,{richColors:!0,closeButton:!0})]})}},6891:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var s=a(5155),l=a(2115),r=a(6203),i=a(8214);function n(){let[e,t]=(0,l.useState)(""),[a,n]=(0,l.useState)(""),[c,o]=(0,l.useState)(null),[d,u]=(0,l.useState)(null),[h,x]=(0,l.useState)(!1);async function m(t){var s,l;t.preventDefault();try{await (0,r.x9)(i.j,e,a);try{let e=await (null==(s=i.j.currentUser)?void 0:s.getIdToken());e&&await fetch("/api/auth/session",{method:"POST",headers:{Authorization:"Bearer ".concat(e)}})}catch(e){}o(null)}catch(e){o(null!=(l=e.message)?l:"Erro a iniciar sess\xe3o")}}async function f(t){t.preventDefault();try{let t=await (0,r.eJ)(i.j,e,a);console.log(t),o(null)}catch(e){var s;o(null!=(s=e.message)?s:"Erro a registar")}}async function b(e){var t,a;e.preventDefault();try{let e=new r.HF;await (0,r.df)(i.j,e);try{let e=await (null==(t=i.j.currentUser)?void 0:t.getIdToken());e&&await fetch("/api/auth/session",{method:"POST",headers:{Authorization:"Bearer ".concat(e)}})}catch(e){}o(null)}catch(e){o(null!=(a=e.message)?a:"Erro no login com Google")}}async function j(e){e.preventDefault();try{await i.j.signOut()}catch(e){o(e.message)}}return(0,l.useEffect)(()=>{let e=(0,r.hg)(i.j,e=>{u(e),x(!!e)});return()=>e()},[]),(0,l.useEffect)(()=>{if(h){let e=setTimeout(()=>x(!1),4e3);return()=>clearTimeout(e)}},[h]),(0,s.jsx)("form",{onSubmit:m,children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("input",{className:"input input-bordered",value:e,onChange:e=>t(e.target.value),placeholder:"email"}),(0,s.jsx)("input",{className:"input input-bordered",type:"password",value:a,onChange:e=>n(e.target.value),placeholder:"password"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Entrar"}),(0,s.jsx)("button",{className:"btn",onClick:f,children:"Registar"})]}),(0,s.jsx)("div",{className:"divider",children:"ou"}),(0,s.jsx)("button",{className:"btn btn-outline",onClick:b,children:"Entrar com Google"}),c&&(0,s.jsx)("p",{className:"text-red-600 text-sm",children:c}),(0,s.jsx)("button",{onClick:j,className:"btn btn-secondary mt-2",children:"Sair"}),d&&h&&(0,s.jsxs)("div",{role:"alert",className:"alert alert-success mt-2",children:[(0,s.jsxs)("span",{children:["Autenticado como ",(0,s.jsx)("strong",{children:d.email}),"."]}),(0,s.jsx)("button",{type:"button",className:"btn btn-sm",onClick:()=>x(!1),children:"Fechar"})]})]})})}let c=()=>(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card-body",children:(0,s.jsx)("h2",{className:"card-title",children:"Login"})}),(0,s.jsx)("div",{children:(0,s.jsx)(n,{})})]})},7251:(e,t,a)=>{Promise.resolve().then(a.bind(a,6215))},8214:(e,t,a)=>{"use strict";a.d(t,{I:()=>u,db:()=>d,j:()=>o});var s=a(3915),l=a(6203),r=a(5317),i=a(858),n=a(9509);let c=(0,s.Dk)().length?(0,s.Dk)()[0]:(0,s.Wp)({apiKey:"AIzaSyA8JlKiOAm4_8J7P77ZejpRbfm0liK1Gmk",authDomain:"gallery-e87e5.firebaseapp.com",projectId:"gallery-e87e5",storageBucket:"gallery-e87e5.firebasestorage.app",messagingSenderId:"799027183409",appId:"1:799027183409:web:24c7d316a8a523e7b7fa10",measurementId:"G-9WQWR0RHC6"}),o=(0,l.xI)(c),d=(0,r.aU)(c),u=(0,i.c7)(c);if("true"===n.env.NEXT_PUBLIC_FIREBASE_EMULATORS)try{(0,i.nb)(u,"localhost",9199)}catch(e){}}},e=>{e.O(0,[992,811,288,797,55,718,441,964,358],()=>e(e.s=7251)),_N_E=e.O()}]);