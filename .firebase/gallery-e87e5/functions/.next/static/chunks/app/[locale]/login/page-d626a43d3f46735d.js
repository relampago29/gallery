(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{4018:(e,t,a)=>{Promise.resolve().then(a.bind(a,6891))},6891:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var s=a(5155),n=a(2115),l=a(6203),r=a(8214);function c(){let[e,t]=(0,n.useState)(""),[a,c]=(0,n.useState)(""),[i,o]=(0,n.useState)(null),[u,d]=(0,n.useState)(null),[h,m]=(0,n.useState)(!1);async function p(t){var s,n;t.preventDefault();try{await (0,l.x9)(r.j,e,a);try{let e=await (null==(s=r.j.currentUser)?void 0:s.getIdToken());e&&await fetch("/api/auth/session",{method:"POST",headers:{Authorization:"Bearer ".concat(e)}})}catch(e){}o(null)}catch(e){o(null!=(n=e.message)?n:"Erro a iniciar sess\xe3o")}}async function b(t){t.preventDefault();try{let t=await (0,l.eJ)(r.j,e,a);console.log(t),o(null)}catch(e){var s;o(null!=(s=e.message)?s:"Erro a registar")}}async function g(e){var t,a;e.preventDefault();try{let e=new l.HF;await (0,l.df)(r.j,e);try{let e=await (null==(t=r.j.currentUser)?void 0:t.getIdToken());e&&await fetch("/api/auth/session",{method:"POST",headers:{Authorization:"Bearer ".concat(e)}})}catch(e){}o(null)}catch(e){o(null!=(a=e.message)?a:"Erro no login com Google")}}async function j(e){e.preventDefault();try{await r.j.signOut()}catch(e){o(e.message)}}return(0,n.useEffect)(()=>{let e=(0,l.hg)(r.j,e=>{d(e),m(!!e)});return()=>e()},[]),(0,n.useEffect)(()=>{if(h){let e=setTimeout(()=>m(!1),4e3);return()=>clearTimeout(e)}},[h]),(0,s.jsx)("form",{onSubmit:p,children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("input",{className:"input input-bordered",value:e,onChange:e=>t(e.target.value),placeholder:"email"}),(0,s.jsx)("input",{className:"input input-bordered",type:"password",value:a,onChange:e=>c(e.target.value),placeholder:"password"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Entrar"}),(0,s.jsx)("button",{className:"btn",onClick:b,children:"Registar"})]}),(0,s.jsx)("div",{className:"divider",children:"ou"}),(0,s.jsx)("button",{className:"btn btn-outline",onClick:g,children:"Entrar com Google"}),i&&(0,s.jsx)("p",{className:"text-red-600 text-sm",children:i}),(0,s.jsx)("button",{onClick:j,className:"btn btn-secondary mt-2",children:"Sair"}),u&&h&&(0,s.jsxs)("div",{role:"alert",className:"alert alert-success mt-2",children:[(0,s.jsxs)("span",{children:["Autenticado como ",(0,s.jsx)("strong",{children:u.email}),"."]}),(0,s.jsx)("button",{type:"button",className:"btn btn-sm",onClick:()=>m(!1),children:"Fechar"})]})]})})}let i=()=>(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("div",{className:"card-body",children:(0,s.jsx)("h2",{className:"card-title",children:"Login"})}),(0,s.jsx)("div",{children:(0,s.jsx)(c,{})})]})},8214:(e,t,a)=>{"use strict";a.d(t,{I:()=>d,db:()=>u,j:()=>o});var s=a(3915),n=a(6203),l=a(5317),r=a(858),c=a(9509);let i=(0,s.Dk)().length?(0,s.Dk)()[0]:(0,s.Wp)({apiKey:"AIzaSyA8JlKiOAm4_8J7P77ZejpRbfm0liK1Gmk",authDomain:"gallery-e87e5.firebaseapp.com",projectId:"gallery-e87e5",storageBucket:"gallery-e87e5.firebasestorage.app",messagingSenderId:"799027183409",appId:"1:799027183409:web:24c7d316a8a523e7b7fa10",measurementId:"G-9WQWR0RHC6"}),o=(0,n.xI)(i),u=(0,l.aU)(i),d=(0,r.c7)(i);if("true"===c.env.NEXT_PUBLIC_FIREBASE_EMULATORS)try{(0,r.nb)(d,"localhost",9199)}catch(e){}}},e=>{e.O(0,[992,811,288,441,964,358],()=>e(e.s=4018)),_N_E=e.O()}]);